(this["webpackJsonpmovies-app"]=this["webpackJsonpmovies-app"]||[]).push([[0],{110:function(e,t,a){e.exports=a(123)},115:function(e,t,a){},123:function(e,t,a){"use strict";a.r(t);var n,r=a(0),o=a.n(r),i=a(43),c=a.n(i),u=(a(115),a(13)),l=a(146),s=a(124),m=a(7),f=a(26),E=a(11),p=a(12),d=a(49),v=a(155),h=a(158),S=a(156),g=a(144),y=a(157),b=a(145),O=a(4),_=a.n(O),w=a(9);!function(e){e.SIGNUP_REQUEST="@@signup/request",e.SIGNUP_SUCCESS="@@signup/success",e.SIGNUP_FAILURE="@@signup/failure",e.SIGNIN_REQUEST="@@signin/request",e.SIGNIN_SUCCESS="@@signin/success",e.SIGNIN_FAILURE="@@signin/failure",e.LOGOUT="@@logout"}(n||(n={}));var I=window.localStorage;function C(e){return new Promise((function(t,a){try{var n=function(e){if(N(e.email))return!0;return!1}(e);if(console.log(n),n)throw new Error("User with this email already exists");!function(e){var t=JSON.parse(I.getItem("users")||"[]");Array.isArray(t)&&t.length>0?(t.push(e),I.setItem("users",JSON.stringify(t))):I.setItem("users",JSON.stringify([e]))}(e),A(e),t(e)}catch(r){console.log(r),a(r)}}))}function T(e){var t=e.email,a=e.password;return new Promise((function(e,n){try{var r=N(t);if(!r)throw new Error("User not found");r.password===a&&(A(r),e(r))}catch(o){n(o)}}))}function U(e){return new Promise((function(t,a){try{var n=JSON.parse(I.getItem("users")||"[]");R(),I.removeItem("users"),I.setItem("signed",JSON.stringify(e));var r=n.filter((function(t){return t.email!==e.email}));r.push(e),I.setItem("users",JSON.stringify(r)),t(e)}catch(o){a(o)}}))}function R(){JSON.parse(I.getItem("signed")||"false")&&I.removeItem("signed")}function A(e){JSON.parse(I.getItem("signed")||"false")&&I.removeItem("signed"),I.setItem("signed",JSON.stringify(e))}function N(e){var t=JSON.parse(I.getItem("users")||"[]");return!!(Array.isArray(t)&&t.length>0)&&t.find((function(t){return t.email===e}))}function j(e){return{type:n.SIGNUP_SUCCESS,payload:{user:e}}}function F(e){return{type:n.SIGNUP_FAILURE,payload:{error:e}}}function x(e){return{type:n.SIGNIN_SUCCESS,payload:{user:e}}}function k(e){return{type:n.SIGNIN_FAILURE,payload:{error:e}}}var V=a(23),G=V.a({email:V.c().email("Please enter a valid email").required("Please enter a valid email"),password:V.c().min(4).required("Please enter your password")}),L=V.a({firstName:V.c().min(4).required("Please enter your first name"),lastName:V.c().min(4).required("Please enter your last name"),email:V.c().email("Please enter a valid email").required("Please enter a valid email"),gender:V.c().required(""),password:V.c().min(4).required("Please enter your password"),passwordConfirm:V.c().when("password",{is:function(e){return!!(e&&e.length>0)},then:V.c().oneOf([V.b("password")],"Both passwords need to be the same")})});function M(){var e=Object(E.a)(["\n  margin: 0 auto;\n  display: block;\n"]);return M=function(){return e},e}function P(){var e=Object(E.a)(["\n  margin: 0 0 20px 0;\n"]);return P=function(){return e},e}function q(){var e=Object(E.a)(["\n  padding: 15px;\n  .MuiInputBase-root {\n    display: block;\n    margin-bottom: 20px;\n  }\n"]);return q=function(){return e},e}var D=["Female","Male"],Q={firstName:"",lastName:"",email:"",gender:"",password:"",passwordConfirm:""},J=p.a.form(q()),H=p.a.h2(P()),z=Object(p.a)(v.a)(M());var B=function(){var e=o.a.useState(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],i=Object(m.b)(),c=Object(m.c)((function(e){return e.user})),u=c.loading,l=c.error,s=Object(d.a)({initialValues:Q,validationSchema:L,onSubmit:function(e){i((t={firstName:e.firstName,lastName:e.lastName,email:e.email,gender:e.gender,password:e.password},function(){var e=Object(w.a)(_.a.mark((function e(a){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a({type:n.SIGNUP_REQUEST}),C(t).then((function(e){a(j(e))}),(function(e){a(F(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())),r(!0);var t}}),E=s.handleChange,p=s.handleSubmit,v=s.values,O=s.errors,I=s.touched;return o.a.createElement(J,{onSubmit:p},o.a.createElement(H,null,"Sign Up"),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"firstName"},"First name"),o.a.createElement(S.a,{id:"firstName",value:v.firstName,onChange:E}),o.a.createElement(g.a,{error:!0},I.firstName&&O.firstName)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"lastName"},"Last name"),o.a.createElement(S.a,{id:"lastName",value:v.lastName,onChange:E}),o.a.createElement(g.a,{error:!0},I.lastName&&O.lastName)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"email"},"Email"),o.a.createElement(S.a,{id:"email",value:v.email,onChange:E}),o.a.createElement(g.a,{error:!0},I.email&&O.email)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"gender"},"Gender"),o.a.createElement(y.a,{value:v.gender,onChange:E,id:"gender",inputProps:{"aria-label":"gender"}},o.a.createElement("option",{value:"none"},"None"),D.map((function(e){return o.a.createElement("option",{value:e},e)})))),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"password"},"Password"),o.a.createElement(S.a,{type:"password",id:"password",value:v.password,onChange:E}),o.a.createElement(g.a,{error:!0},I.password&&O.password)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"passwordConfirm"},"Confirm password"),o.a.createElement(S.a,{type:"password",id:"passwordConfirm",value:v.passwordConfirm,onChange:E}),o.a.createElement(g.a,{error:!0},I.passwordConfirm&&O.passwordConfirm)),o.a.createElement("div",null,o.a.createElement(z,{type:"submit",color:"primary",variant:"contained"},"Sign Up"),u?o.a.createElement(b.a,null):null),o.a.createElement(g.a,{style:{marginTop:"20px"},error:!0},a?(null===l||void 0===l?void 0:l.message)||"":null))};function W(){var e=Object(E.a)(["\n  margin: 0 auto;\n  display: block;\n"]);return W=function(){return e},e}function $(){var e=Object(E.a)(["\n  margin: 0 0 20px 0;\n"]);return $=function(){return e},e}function K(){var e=Object(E.a)(["\n  padding: 15px;\n  .MuiInputBase-root {\n    display: block;\n    margin-bottom: 20px;\n  }\n"]);return K=function(){return e},e}var X={email:"",password:""},Y=p.a.form(K()),Z=p.a.h2($()),ee=Object(p.a)(v.a)(W());var te=function(){var e=o.a.useState(!1),t=Object(f.a)(e,2),a=t[0],r=t[1],i=Object(m.b)(),c=Object(m.c)((function(e){return e.user})),u=c.loading,l=c.error,s=Object(d.a)({initialValues:X,validationSchema:G,onSubmit:function(e){i(function(e){var t=e.email,a=e.password;return function(){var e=Object(w.a)(_.a.mark((function e(r){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r({type:n.SIGNIN_REQUEST}),T({email:t,password:a}).then((function(e){r(x(e))}),(function(e){r(k(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}({email:e.email,password:e.password})),r(!0)}}),E=s.handleChange,p=s.handleSubmit,v=s.values,y=s.errors,O=s.touched;return o.a.createElement(Y,{onSubmit:p},o.a.createElement(Z,null,"Sign In"),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"email"},"Email"),o.a.createElement(S.a,{id:"email",value:v.email,onChange:E}),o.a.createElement(g.a,{error:!0},O.email&&y.email)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"password"},"Password"),o.a.createElement(S.a,{type:"password",id:"password",value:v.password,onChange:E}),o.a.createElement(g.a,{error:!0},O.password&&y.password)),o.a.createElement("div",null,o.a.createElement(ee,{type:"submit",color:"primary",variant:"contained"},"Sign Up"),u?o.a.createElement(b.a,null):null),o.a.createElement(g.a,{style:{marginTop:"20px"},error:!0},a?(null===l||void 0===l?void 0:l.message)||"":null))};var ae,ne=function(){var e=Object(u.g)(),t=Object(m.c)((function(e){return e.user.isAuthorized}));return o.a.useEffect((function(){t&&e.push("/movies")}),[e,t]),o.a.createElement(l.a,{container:!0,spacing:5},o.a.createElement(l.a,{item:!0,sm:12,md:6},o.a.createElement(s.a,null,o.a.createElement(B,null))),o.a.createElement(l.a,{item:!0,sm:12,md:6},o.a.createElement(s.a,null,o.a.createElement(te,null))))};!function(e){e.SEARCH_MOVIE_REQUEST="@@search-movie/request",e.SEARCH_MOVIE_SUCCESS="@@search-movie/success",e.SEARCH_MOVIE_FAILURE="@@search-movie/failure",e.GET_MOVIE_REQUEST="@@get-movie/request",e.GET_MOVIE_SUCCESS="@@get-movie/success",e.GET_MOVIE_FAILURE="@@get-movie/failure",e.GET_MOVIES_REQUEST="@@get-movies/request",e.GET_MOVIES_SUCCESS="@@get-movies/success",e.GET_MOVIES_FAILURE="@@get-movies/failure",e.FETCH_MORE_REQUEST="@@fetch-more/request",e.FETCH_MORE_SUCCESS="@@fetch-more/success",e.FETCH_MORE_FAILURE="@@fetch-more/failure",e.PUSH_MOVIES="@@push-movies"}(ae||(ae={}));var re="bb3a59e3fff5bbf88c96bf7d3614416d",oe="https://api.themoviedb.org/3",ie={"content-type":"application/json"};function ce(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(w.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t,{headers:ie});case 2:return a=e.sent,e.next=5,a.json();case 5:if(n=e.sent,!a.ok){e.next=10;break}return e.abrupt("return",n);case 10:throw new Error(n.message);case 11:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function le(e){return se.apply(this,arguments)}function se(){return(se=Object(w.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(oe,"/search/movie?api_key=").concat(re,"&query=").concat(t),t||(a="".concat(oe,"/movie/popular?api_key=").concat(re)),e.next=4,ce(a);case 4:return n=e.sent,e.abrupt("return",n);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function me(e,t){return fe.apply(this,arguments)}function fe(){return(fe=Object(w.a)(_.a.mark((function e(t,a){var n,r;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="".concat(oe,"/search/movie?api_key=").concat(re,"&query=").concat(t,"&page=").concat(a),t||(n="".concat(oe,"/movie/popular?api_key=").concat(re,"&page=").concat(a)),e.next=4,ce(n);case 4:return r=e.sent,e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(w.a)(_.a.mark((function e(t){var a,n;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="".concat(oe,"/movie/").concat(t,"?api_key=").concat(re),e.next=3,ce(a);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e){return ve.apply(this,arguments)}function ve(){return(ve=Object(w.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(w.a)(_.a.mark((function e(t){var a;return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ee(t);case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return function(){var t=Object(w.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:ae.SEARCH_MOVIE_REQUEST,payload:{query:e}}),le(e).then((function(e){a(Se(e))}),(function(e){a(ge(e))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function Se(e){return{type:ae.SEARCH_MOVIE_SUCCESS,payload:{data:e}}}function ge(e){return{type:ae.SEARCH_MOVIE_FAILURE,payload:{error:e}}}function ye(e){return{type:ae.GET_MOVIE_SUCCESS,payload:{movie:e}}}function be(e){return{type:ae.GET_MOVIE_FAILURE,payload:{error:e}}}function Oe(e){return{type:ae.FETCH_MORE_SUCCESS,payload:{data:e}}}function _e(e){return{type:ae.GET_MOVIES_SUCCESS,payload:{data:e}}}function we(e){return{type:ae.GET_MOVIES_FAILURE,payload:{error:e}}}var Ie=a(34);function Ce(){var e=Object(E.a)(["\n  max-width: 100%;\n  width: auto;\n  height: auto;\n  display: block;\n"]);return Ce=function(){return e},e}var Te=p.a.img(Ce());var Ue=function(e){var t=e.path,a=e.alt,n=o.a.useState("https://via.placeholder.com/400x640"),r=Object(f.a)(n,2),i=r[0],c=r[1];return o.a.useEffect((function(){var e=new AbortController;return Object(w.a)(_.a.mark((function a(){var n;return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(null===t){a.next=11;break}return a.prev=1,a.next=4,fetch("https://image.tmdb.org/t/p/w500/".concat(t),{signal:e.signal});case 4:(n=a.sent).ok&&n.url&&c(n.url),a.next=11;break;case 8:a.prev=8,a.t0=a.catch(1),console.error(a.t0);case 11:case"end":return a.stop()}}),a,null,[[1,8]])})))(),function(){e.abort()}}),[t]),o.a.createElement(Te,{src:i,alt:a})};function Re(){var e=Object(E.a)([""]);return Re=function(){return e},e}function Ae(){var e=Object(E.a)([""]);return Ae=function(){return e},e}var Ne=Object(p.a)(Ie.b)(Ae()),je=p.a.h3(Re());var Fe=function(e){var t=e.id,a=e.title,n=e.poster;return o.a.createElement(Ne,{to:"/movies/".concat(t)},o.a.createElement(Ue,{path:n,alt:a}),o.a.createElement(je,null,a))};function xe(){var e=Object(E.a)(["\n  max-width: 400px;\n  max-height: 640px;\n  width: 100%;\n  height: 100%;\n  background-color: grey;\n"]);return xe=function(){return e},e}function ke(){var e=Object(E.a)([""]);return ke=function(){return e},e}var Ve=p.a.div(ke()),Ge=p.a.div(xe());var Le=function(){var e=Array(15);return o.a.createElement(l.a,{container:!0,spacing:5},e.map((function(e,t){return o.a.createElement(l.a,{item:!0,key:t,xs:12,sm:6,md:4},o.a.createElement(Ve,null,o.a.createElement(Ge,null)))})))};var Me,Pe=function(){var e=Object(m.b)(),t=o.a.useState(0),a=Object(f.a)(t,2),n=a[0],r=a[1],i=Object(m.c)((function(e){return e.movies})),c=i.data,u=i.loading,s=i.error,E=i.query;if(o.a.useEffect((function(){e(he(""))}),[e]),o.a.useEffect((function(){c.total_results>15*n&&c.results.length<21*n&&e(function(e,t){return function(){var a=Object(w.a)(_.a.mark((function a(n){return _.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n({type:ae.FETCH_MORE_REQUEST}),me(e,t).then((function(e){n(Oe(e))}),(function(e){n(ge(e))}));case 2:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()}(E,c.page+1))}),[e,n,c.results,c.page,c.total_results,E]),u)return o.a.createElement(Le,null);if(s)return o.a.createElement("span",null,s.message);var p=c.results.slice(15*n,15*(n+1));return o.a.createElement(l.a,{container:!0,spacing:5},p.map((function(e){return o.a.createElement(l.a,{item:!0,key:e.id,xs:12,sm:6,md:4},o.a.createElement(Fe,{id:e.id,title:e.title,poster:e.poster_path}))})),o.a.createElement(l.a,{container:!0,justify:"center",alignItems:"center",style:{margin:"20px 0 40px 0"}},o.a.createElement(v.a,{disabled:0===n,onClick:function(){r(n-1)}},"prev page"),o.a.createElement("span",{style:{padding:"0 20px"}},n+1),o.a.createElement(v.a,{disabled:15*(n+1)>=c.total_results,onClick:function(){r(n+1)}},"next page")))};!function(e){e.GET_FAVORITES_REQUEST="@@get-favorites/request",e.GET_FAVORITES_SUCCESS="@@get-favorites/success",e.GET_FAVORITES_FAILURE="@@get-favorites/failure",e.ADD_FAVORITE_REQUEST="@@add-favorite/request",e.ADD_FAVORITE_SUCCESS="@@add-favorite/success",e.ADD_FAVORITE_FAILURE="@@add-favorite/failure",e.DELETE_FAVORITE_REQUEST="@@delete-favorite/request",e.DELETE_FAVORITE_SUCCESS="@@delete-favorite/success",e.DELETE_FAVORITE_FAILURE="@@delete-favorite/failure"}(Me||(Me={}));var qe=a(27),De=window.localStorage;function Qe(e){return new Promise((function(t,a){try{if(function(e){var t=function(e){var t=JSON.parse(De.getItem("favorites")||"[]");if(Array.isArray(t)&&t.length>0)return t.find((function(t){return t==e}))}(e);if(console.log(t),t)return!0;return!1}(e))throw new Error("This movie already in favorites list");!function(e){var t=JSON.parse(De.getItem("favorites")||"[]");Array.isArray(t)&&t.length>0?(t.push(e),De.setItem("favorites",JSON.stringify(t))):De.setItem("favorites",JSON.stringify([e]))}(e),t(e)}catch(n){console.log(n),a(n)}}))}function Je(){return new Promise((function(e,t){try{e(function(){var e=JSON.parse(De.getItem("favorites")||"[]");if(Array.isArray(e)&&e.length>0)return e;return[]}())}catch(a){t(a)}}))}function He(e){return new Promise((function(t,a){try{!function(e){var t=JSON.parse(De.getItem("favorites")||"[]"),a=t.findIndex((function(t){return t==e})),n=[].concat(Object(qe.a)(t.slice(0,a)),Object(qe.a)(t.slice(a+1)));De.setItem("favorites",JSON.stringify(n))}(e),t(Number(e))}catch(n){a(n)}}))}function ze(e){return{type:Me.GET_FAVORITES_SUCCESS,payload:{data:e}}}function Be(e){return{type:Me.GET_FAVORITES_FAILURE,payload:{error:e}}}function We(e){return{type:Me.ADD_FAVORITE_SUCCESS,payload:{id:e}}}function $e(e){return{type:Me.ADD_FAVORITE_FAILURE,payload:{error:e}}}function Ke(e){return{type:Me.DELETE_FAVORITE_SUCCESS,payload:{id:e}}}function Xe(e){return{type:Me.DELETE_FAVORITE_FAILURE,payload:{error:e}}}function Ye(){var e=Object(m.c)((function(e){return e.user}));return{user:e.user,isAuthorized:e.isAuthorized}}var Ze=function(){var e=Object(u.h)().id,t=Object(m.b)(),a=Ye().isAuthorized,n=Object(m.c)((function(t){return t.movies.data.results.find((function(t){return t.id===Number(e)}))})),r=Object(m.c)((function(e){return e.movies})),i=r.loading,c=r.error,f=Object(m.c)((function(t){return-1!==t.favorites.ids.findIndex((function(t){return t===Number(e)}))}));function E(){var a;t((a=e,function(){var e=Object(w.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Me.ADD_FAVORITE_REQUEST}),Qe(a).then((function(e){t(We(e))}),(function(e){t($e(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}return o.a.useEffect((function(){var a;n||t((a=Number(e),function(){var e=Object(w.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:ae.GET_MOVIE_REQUEST}),Ee(a).then((function(e){t(ye(e))}),(function(e){t(be(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()))}),[t,n,e]),i?o.a.createElement(b.a,null):c?o.a.createElement("span",null,c.message):n?o.a.createElement(s.a,{style:{padding:"15px"}},o.a.createElement(l.a,{container:!0,spacing:5},o.a.createElement(l.a,{item:!0,md:3},o.a.createElement(Ue,{path:n.poster_path,alt:n.title})),o.a.createElement(l.a,{item:!0,md:9},o.a.createElement("h2",null,n.title),o.a.createElement("div",null,new Date(n.release_date).toLocaleDateString()),o.a.createElement("p",null,n.overview),a?o.a.createElement(v.a,{disabled:f,onClick:function(){return E()},color:"primary",variant:"contained"},f?"In favorites":"Add to favorites"):null))):o.a.createElement("span",null,"not found")},et=a(2);function tt(e){var t=Ye().isAuthorized,a=e.component,n=Object(et.a)(e,["component"]);return t?o.a.createElement(u.b,Object.assign({},n,{render:function(e){return t?o.a.createElement(a,e):o.a.createElement(u.a,{to:"/login"})}})):null}var at=a(94);function nt(){var e=Object(E.a)(["\n  margin: auto;\n  display: block;\n"]);return nt=function(){return e},e}function rt(){var e=Object(E.a)(["\n  width: 100%;\n  margin: 0 auto;\n  .MuiInputBase-root {\n    display: block;\n    margin-bottom: 20px;\n  }\n"]);return rt=function(){return e},e}var ot=["Female","Male"],it=p.a.form(rt()),ct=Object(p.a)(v.a)(nt());var ut=function(){var e=Ye().user,t=o.a.useState(!1),a=Object(f.a)(t,2),n=a[0],r=a[1],i=Object(m.b)(),c=Object(m.c)((function(e){return e.user})),u=c.loading,E=c.error,p=Object(at.a)(Object(at.a)({},e),{},{passwordConfirm:e.password}),v=Object(d.a)({initialValues:p,validationSchema:L,onSubmit:function(e){i(function(e){return function(){var t=Object(w.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:U(e).then((function(e){a(j(e))}),(function(e){a(F(e))}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}({firstName:e.firstName,lastName:e.lastName,email:e.email,gender:e.gender,password:e.password})),r(!0)}}),O=v.handleChange,I=v.handleSubmit,C=v.values,T=v.errors,R=v.touched,A=v.dirty;return o.a.createElement(s.a,{style:{padding:"15px"}},o.a.createElement(l.a,{container:!0,spacing:5},o.a.createElement(l.a,{item:!0,xs:12,md:6},o.a.createElement("h2",null,"Profile settings"),o.a.createElement(it,{onSubmit:I},o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"firstName"},"First name"),o.a.createElement(S.a,{id:"firstName",value:C.firstName,onChange:O}),o.a.createElement(g.a,{error:!0},R.firstName&&T.firstName)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"lastName"},"Last name"),o.a.createElement(S.a,{id:"lastName",value:C.lastName,onChange:O}),o.a.createElement(g.a,{error:!0},R.lastName&&T.lastName)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"email"},"Email"),o.a.createElement(S.a,{id:"email",value:C.email,onChange:O}),o.a.createElement(g.a,{error:!0},R.email&&T.email)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"gender"},"Gender"),o.a.createElement(y.a,{value:C.gender,onChange:O,id:"gender",inputProps:{"aria-label":"gender"}},o.a.createElement("option",{value:"none"},"None"),ot.map((function(e){return o.a.createElement("option",{value:e},e)})))),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"password"},"Password"),o.a.createElement(S.a,{type:"password",id:"password",value:C.password,onChange:O}),o.a.createElement(g.a,{error:!0},R.password&&T.password)),o.a.createElement("div",null,o.a.createElement(h.a,{htmlFor:"passwordConfirm"},"Confirm password"),o.a.createElement(S.a,{type:"password",id:"passwordConfirm",value:C.passwordConfirm,onChange:O}),o.a.createElement(g.a,{error:!0},R.passwordConfirm&&T.passwordConfirm)),o.a.createElement("div",null,o.a.createElement(ct,{disabled:!A,type:"submit",color:"primary",variant:"contained"},"Save"),u?o.a.createElement(b.a,null):null),o.a.createElement(g.a,{style:{marginTop:"20px"},error:!0},n?(null===E||void 0===E?void 0:E.message)||"":null)))))},lt=a(147),st=a(148),mt=a(149),ft=a(150),Et=a(151);var pt=function(){var e=Object(m.b)(),t=o.a.useState(0),a=Object(f.a)(t,2),n=a[0],r=a[1],i=Object(m.c)((function(e){return e.favorites})).ids,c=Object(m.c)((function(e){return{movies:e.movies.data.results.filter((function(e){return Array.isArray(i)&&i.includes(e.id)})),loading:e.movies.loading,error:e.movies.error}})),u=c.movies,s=c.loading,E=c.error;function p(t){e(function(e){return function(){var t=Object(w.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:Me.DELETE_FAVORITE_REQUEST}),He(e).then((function(e){a(Ke(e))}),(function(e){a(Xe(e))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))}if(o.a.useEffect((function(){var t=i.every((function(e){return!!u.find((function(t){return t.id===e}))}));i.length>0&&!t&&!s&&e(function(e){return function(){var t=Object(w.a)(_.a.mark((function t(a){return _.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a({type:ae.GET_MOVIES_REQUEST}),de(e).then((function(e){a(_e(e))}),(function(e){a(we(e))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(i))}),[e,i,u,s]),s)return o.a.createElement("span",null,"loading...");if(E)return o.a.createElement("span",null,E.message);var d=u.slice(10*n,10*(n+1));return o.a.createElement(l.a,{container:!0,spacing:5},o.a.createElement(l.a,{item:!0,xs:12},o.a.createElement(lt.a,null,o.a.createElement(st.a,null,o.a.createElement(mt.a,null,o.a.createElement(ft.a,null,"Poster"),o.a.createElement(ft.a,null,"Title"),o.a.createElement(ft.a,null,"Release date"),o.a.createElement(ft.a,null,"Overview"),o.a.createElement(ft.a,null))),o.a.createElement(Et.a,null,d.map((function(e){return o.a.createElement(mt.a,null,o.a.createElement(ft.a,null,o.a.createElement(Ue,{path:e.poster_path,alt:e.title})),o.a.createElement(ft.a,null,e.title),o.a.createElement(ft.a,null,e.release_date),o.a.createElement(ft.a,null,e.overview),o.a.createElement(ft.a,null,o.a.createElement(v.a,{onClick:function(){return p(e.id)}},"DELETE")))}))))),o.a.createElement(l.a,{item:!0,xs:12},o.a.createElement(v.a,{disabled:0===n,onClick:function(){r(n-1)}},"prev page"),n+1,o.a.createElement(v.a,{disabled:10*(n+1)>=u.length,onClick:function(){r(n+1)}},"next page")))};var dt=function(){return o.a.createElement(u.d,null,o.a.createElement(u.b,{exact:!0,path:"/",component:Pe}),o.a.createElement(u.b,{exact:!0,path:"/login",component:ne}),o.a.createElement(u.b,{exact:!0,path:"/movies",component:Pe}),o.a.createElement(u.b,{exact:!0,path:"/movies/:id",component:Ze}),o.a.createElement(tt,{exact:!0,path:"/profile",component:ut}),o.a.createElement(tt,{exact:!0,path:"/favorites",component:pt}))},vt=a(152),ht=a(153),St=a(154);var gt=function(e){var t=e.to,a=e.children;return o.a.createElement(v.a,{style:{color:"#fff",fontWeight:"bold"},component:Ie.b,to:t},a)};function yt(){var e=Object(E.a)(["\n  display: flex;\n  input,\n  button {\n    color: #fff;\n  }\n  button {\n    font-weight: bold;\n  }\n"]);return yt=function(){return e},e}function bt(){var e=Object(E.a)(["\n  color: #fff;\n  font-weight: bold;\n"]);return bt=function(){return e},e}var Ot=V.a({query:V.c().min(2).required("Enter a movie title")}),_t={query:""},wt=Object(p.a)(v.a)(bt()),It=p.a.form(yt());var Ct=function(){var e=Object(m.b)(),t=Object(u.g)(),a=Ye(),r=a.user,i=a.isAuthorized,c=Object(d.a)({initialValues:_t,validationSchema:Ot,onSubmit:function(a){return function(a){e(he(a.query)),t.push("/movies")}(a)}}),l=c.handleSubmit,s=c.handleChange,f=c.values;function E(){i&&e(function(){var e=Object(w.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:new Promise((function(e,t){try{R(),e()}catch(a){t(a)}})).then((function(){t({type:n.LOGOUT})}),(function(e){console.error(e)}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}var p=i?r.firstName:"Guest";return o.a.createElement(vt.a,{position:"fixed"},o.a.createElement(ht.a,null,o.a.createElement(St.a,{variant:"dense",style:{display:"flex",justifyContent:"space-between"}},o.a.createElement(It,{style:{display:"flex"},onSubmit:l},o.a.createElement(h.a,{htmlFor:"query"},o.a.createElement(S.a,{color:"primary",value:f.query,onChange:s,id:"query",placeholder:"Inception",required:!0})),o.a.createElement(v.a,{type:"submit"},"Search")),o.a.createElement("div",null,"Welcome, ",p),o.a.createElement("div",{style:{display:"flex",alignItems:"center"}},o.a.createElement(gt,{to:"/movies"},"movies"),i?o.a.createElement(o.a.Fragment,null,o.a.createElement(gt,{to:"/profile"},"Profile"),o.a.createElement(gt,{to:"/favorites"},"Favorites"),o.a.createElement(wt,{onClick:function(){return E()}},"Logout")):o.a.createElement(gt,{to:"/login"},"login")))))};var Tt=function(){var e=Object(m.b)();return o.a.useEffect((function(){e(function(){var e=Object(w.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:n.SIGNIN_REQUEST}),new Promise((function(e,t){try{var a=JSON.parse(I.getItem("signed")||"false");if(!a)throw new Error("Session Expired");e(a)}catch(n){t(n)}})).then((function(e){t(x(e))}),(function(e){t(k(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e(function(){var e=Object(w.a)(_.a.mark((function e(t){return _.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t({type:Me.GET_FAVORITES_REQUEST}),Je().then((function(e){t(ze(e))}),(function(e){t(Be(e))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[e]),o.a.createElement(o.a.Fragment,null,o.a.createElement(Ct,null),o.a.createElement(ht.a,{style:{marginTop:"100px"}},o.a.createElement(dt,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ut=a(51),Rt=a(107),At=a(66),Nt={data:{page:0,results:[],total_pages:0,total_results:0},loading:!1,error:null,query:""},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;return Object(At.a)(e,(function(a){switch(t.type){case ae.SEARCH_MOVIE_REQUEST:a.loading=!0,a.error=null,a.query=t.payload.query;break;case ae.GET_MOVIE_REQUEST:case ae.GET_MOVIES_REQUEST:case ae.FETCH_MORE_REQUEST:a.loading=!0,a.error=null;break;case ae.SEARCH_MOVIE_SUCCESS:a.loading=!1,a.data=t.payload.data;break;case ae.GET_MOVIES_SUCCESS:var n=t.payload.data;a.loading=!1,n.forEach((function(t){-1===e.data.results.findIndex((function(e){return e.id===t.id}))&&a.data.results.push(t)}));break;case ae.FETCH_MORE_SUCCESS:var r=t.payload.data;a.loading=!1,a.data={page:r.page,total_pages:r.total_pages,total_results:r.total_results,results:[].concat(Object(qe.a)(e.data.results),Object(qe.a)(r.results))};break;case ae.GET_MOVIE_SUCCESS:var o=t.payload.movie;-1===e.data.results.findIndex((function(e){return e.id===o.id}))&&a.data.results.push(o),a.loading=!1;break;case ae.GET_MOVIE_FAILURE:case ae.GET_MOVIES_FAILURE:case ae.SEARCH_MOVIE_FAILURE:a.loading=!1,a.error=t.payload.error;break;default:return e}}))},Ft={user:{firstName:"",lastName:"",email:"",gender:"",password:""},isAuthorized:!1,loading:!1,error:null},xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;return Object(At.a)(e,(function(a){switch(t.type){case n.SIGNUP_REQUEST:case n.SIGNIN_REQUEST:a.loading=!0,a.error=null;break;case n.SIGNUP_SUCCESS:case n.SIGNIN_SUCCESS:a.user=t.payload.user,a.isAuthorized=!0,a.loading=!1;break;case n.SIGNUP_FAILURE:case n.SIGNIN_FAILURE:a.loading=!1,a.error=t.payload.error;break;case n.LOGOUT:a.user=Ft.user,a.isAuthorized=!1;break;default:return e}}))},kt={ids:[],loading:!1,error:null},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;return Object(At.a)(e,(function(a){switch(t.type){case Me.GET_FAVORITES_REQUEST:case Me.ADD_FAVORITE_REQUEST:case Me.DELETE_FAVORITE_REQUEST:a.loading=!0,a.error=null;break;case Me.GET_FAVORITES_SUCCESS:a.loading=!1,a.ids=t.payload.data.map((function(e){return Number(e)}));break;case Me.ADD_FAVORITE_SUCCESS:a.loading=!1,a.ids=[].concat(Object(qe.a)(e.ids),[Number(t.payload.id)]);break;case Me.DELETE_FAVORITE_SUCCESS:a.loading=!1;var n=e.ids.filter((function(e){return e!==t.payload.id}));a.ids=n;break;case Me.GET_FAVORITES_FAILURE:case Me.ADD_FAVORITE_FAILURE:case Me.DELETE_FAVORITE_FAILURE:a.loading=!1,a.error=t.payload.error;break;default:return e}}))},Gt=Object(Ut.c)({movies:jt,user:xt,favorites:Vt});var Lt=function(){var e=Ut.d,t=[Rt.a],a=[Ut.a.apply(void 0,t)];return Object(Ut.e)(Gt,e.apply(void 0,a))}();c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(Ie.a,null,o.a.createElement(m.a,{store:Lt},o.a.createElement(Tt,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[110,1,2]]]);
//# sourceMappingURL=main.ad4422a8.chunk.js.map